---
title: "vimã§terminalã‚’toggleã§è¡¨ç¤ºã€éè¡¨ç¤ºã™ã‚‹è¨­å®š"
emoji: "ğŸ˜Š"
type: "tech"
topics: ['vim']
published: true
---

## çµŒç·¯
neovimã§ã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ãƒˆã‚°ãƒ«ã™ã‚‹https://github.com/akinsho/toggleterm.nvim ã¨ã„ã†å¤§å¤‰ä¾¿åˆ©ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸã€‚
ã—ã‹ã—ã€ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯vimã§ã¯ä½¿ãˆãªã„ã®ã§ä»Šå›ã¡ã‚ƒã¡ã‚ƒã£ã¨vimscriptã‚’æ›¸ãã¾ã—ãŸã€‚

## å®Ÿè£…
ä»¥ä¸‹ã‚’`.vimrc`ã«æ›¸ã‘ã°æŒ‡å®šã—ãŸã‚­ãƒ¼ãƒãƒƒãƒ—ã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šå¤‰ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
``` vim
let g:terminal_bufnr = -1
function! ToggleTerminal()
  if &buftype == 'terminal'
    " If the current buffer is a terminal, go back to the previous buffer
    execute "buffer #"
    execute "close"
  else
    " If the current buffer is not a terminal, try to find the terminal buffer
    if bufexists(g:terminal_bufnr)
      " If the terminal buffer exists, switch to it
      execute 'split'
      execute "buffer " . g:terminal_bufnr
      execute "normal i"

    else
      " If no terminal buffer exists, create a new one and save its buffer number
      terminal
      let g:terminal_bufnr = bufnr('%')
    endif

  endif
endfunction

nnoremap <silent> <C-t> :call ToggleTerminal()<CR>
tnoremap <silent> <C-t> <C-\><C-n>:call ToggleTerminal()<CR>
```
ã“ã®ã¾ã¾ã‚³ãƒ”ãƒšã™ã‚Œã°ã€normal modeã«ã¦Ctrl + tã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ãƒˆã‚°ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
